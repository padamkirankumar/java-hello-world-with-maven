
pipeline {
     agent any    
    stages {
        stage('cloning the github') {
          
          agent { label 'tomcatvm' }
            steps {

                 git branch: 'master', url: 'https://github.com/padamkirankumar/java-hello-world-with-maven.git'
            }
        }
        
        stage('BUILDING THE MAVEN PROJECT') {
                    tools {
                maven 'mvn396'
                jdk 'jdk11'
                }  
	            steps {
	
	                 sh '''
	                 
	                 mvn clean package
	                 
	                 '''
	            }
        }
        
        stage('running the JAR') {
                      agent { label 'tomcatvm' }
		            steps {
		
		                 sh '''
		                 
		                ls -la
		                cd target
                                mv *.jar *.war
		                cp *.war /opt/tomcat9/webapps/
                                ls -la /opt/tomcat9/webapps/
		                 
		                 '''
		            }
        }
        
           }
}
